import{t as L}from"./tabs-605f1a9c.js";import{g as $,_ as b,r as d,o as r,e as y,q as u,s as c,a as t,D as T,t as m,G as Y,m as S,h as C,c as i,F as v,u as V,A as x,b as D,L as A,y as M,z as w,v as q}from"./index-471713de.js";import{U as R,G as E,V as j,h as B,S as I}from"./transition-9ce3a670.js";import"./hidden-b4a717ef.js";const F=$({name:"mail-req",components:{Dialog:R,DialogPanel:E,DialogTitle:j,TransitionChild:B,TransitionRoot:I},props:{isOpen:{type:Boolean,required:!0,default:!1},showData:{required:!0}},methods:{close(){this.$emit("mail-close",!1)}}}),H=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),N={class:"fixed inset-0 z-10 overflow-y-auto"},O={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},z={class:""},U={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},P=["innerHTML"],G={class:"mt-5 sm:mt-4 flex justify-end gap-2"};function Q(e,o,h,_,s,p){const l=d("TransitionChild"),n=d("DialogTitle"),a=d("DialogPanel"),g=d("Dialog"),f=d("TransitionRoot");return r(),y(f,{as:"template",show:e.isOpen},{default:u(()=>[c(g,{as:"div",class:"relative z-10",onClose:o[1]||(o[1]=k=>e.close())},{default:u(()=>[c(l,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[H]),_:1}),t("div",N,[t("div",O,[c(l,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:u(()=>[c(a,{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all w-[650px] sm:p-6"},{default:u(()=>[t("div",z,[t("div",U,[c(n,{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:u(()=>[T(m(e.showData.subject),1)]),_:1}),t("div",{class:"rounded-lg bg-white border border-[#E1E2E6] mt-2 p-4",innerHTML:e.showData.data},null,8,P)])]),t("div",G,[t("button",{type:"button",class:"min-h-[32px] px-4 text-sm rounded bg-[#ffffff] border border-[#a2a2a2] text-[#17181A] tracking-[0.2px]",onClick:o[0]||(o[0]=k=>e.close())},"Close")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}const J=b(F,[["render",Q]]),K=$({name:"mail-logs",computed:{...Y("logs",["loginType","isMailDial"]),...S("logs",["getMailLogs"])},setup(){return{bindData:C()}},components:{mailReq:J},methods:{formatDate(e){const o=String(e.getDate()).padStart(2,"0"),h=String(e.getMonth()+1).padStart(2,"0"),_=e.getFullYear();let s=e.getHours();const p=s>=12?"pm":"am";s=s%12,s=s||12;const l=String(e.getMinutes()).padStart(2,"0");return`${o}/${h}/${_}, ${s}:${l} ${p}`}}}),W={class:"px-4"},X={key:0,class:"w-full border-t border-[#ededed] dark:border-[#232325] relative mt-[1px] bg-white rounded-lg"},Z={class:"border-b dark:border-[#232325] dark:bg-[#181818]"},ee={class:"border-b text-[13px]"},te={class:"text-center py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"},oe=t("th",{class:"text-center py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"},"Request Log",-1),se=t("th",{class:"text-center py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"},"Response Log",-1),ae=t("th",{class:"text-center py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"},"Time",-1),ne={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},re={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},ie={key:0},le={key:1,class:"flex justify-center items-center gap-3"},de=["onClick"],ce={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},pe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},me={key:1,class:"min-h-[300px] flex justify-center items-center"};function ue(e,o,h,_,s,p){const l=d("mailReq");return r(),i(v,null,[t("div",W,[e.getMailLogs.length>0?(r(),i("table",X,[t("thead",Z,[t("tr",ee,[t("th",te,m(e.loginType=="SMS"?"Mobile No":"E-mail"),1),oe,se,ae])]),t("tbody",null,[(r(!0),i(v,null,V(e.getMailLogs,(n,a)=>(r(),i("tr",{key:a,class:"border-b text-sm"},[t("td",ne,m(e.loginType=="SMS"?n.mobileNo:n.emailId)+" "+m(),1),t("td",re,[e.loginType=="SMS"?(r(),i("span",ie,m(n.requestLog),1)):(r(),i("span",le,[T(m(n.reqLogSub)+" ",1),n.reqLog?(r(),i("a",{key:0,class:"text-blue-500 cursor-pointer underline text-xs",onClick:g=>(e.$store.commit("logs/setIsMailDial",!0),e.bindData={data:n.reqLog,subject:n.reqLogSub})},"View",8,de)):x("",!0)]))]),t("td",ce,m(n.responseLog),1),t("td",pe,m(e.formatDate(new Date(n.createdOn))),1)]))),128))])])):(r(),i("div",me," No Data Found "))]),e.isMailDial?(r(),y(l,{key:0,"is-open":e.isMailDial,"show-data":e.bindData,onMailClose:o[0]||(o[0]=n=>e.$store.commit("logs/setIsMailDial",!1))},null,8,["is-open","show-data"])):x("",!0)],64)}const he=b(K,[["render",ue]]),ge=`<svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5">
    </path></svg>`,_e={components:{maillogsTable:he},data(){return{dateSvg:ge,logType:"EMAIL",fromDate:new Date,toDate:new Date,popover:{visibility:"click",placement:"bottom-start"},value:""}},computed:{...S("logs",["getLoader"])},methods:{getMinDate(){let e=new Date,o=e.getMonth()-1;return e.setMonth(o),e.toISOString().slice(0,10)},async getReports(){if(this.fromDate&&this.toDate&&(this.value&&this.validateRegex(this.value)||!this.value)){let e={limit:20,offset:0,type:this.logType,fromDate:this.fromDate,toDate:this.toDate};this.value&&(e.value=this.value),await this.$store.dispatch("logs/getMailLogData",e)}else(!this.fromDate||!this.toDate)&&this.$store.dispatch("errorLog/toaster",{data:{title:"Select a from Date and To date",type:"danger",message:"",duration:4500},position:""},{root:!0}),this.value&&!this.validateRegex(this.value)&&this.$store.dispatch("errorLog/toaster",{data:{title:"Enter Vaild Email on Mobile Number",type:"danger",message:"",duration:4500},position:""},{root:!0})},validateRegex(e){let o=new RegExp("^([a-z0-9_.-]+@[da-z.-]+.[a-z.]{2,6})$"),h=new RegExp("^([0|+[0-9]{1,5})?([7-9][0-9]{9})$");return e?o.test(e)||e.length>6&&h.test(e):!1},resetFields(e){this.fromDate=this.toDate="",this.logType="EMAIL",this.value="",this.$store.commit("logs/setMailLogs",[])}},created(){this.resetFields()}},fe={class:"p-4"},xe={class:"flex flex-wrap gap-3 card p-5 border rounded bg-white shadow-sm"},ve=t("p",{class:"primaryColor pb-1 text-sm ml-1"},"Log Type",-1),be=t("option",{value:"EMAIL"},"EMAIL",-1),ye=t("option",{value:"SMS"},"SMS",-1),De=[be,ye],Me=t("label",{class:"primaryColor pb-1 text-sm"},"From Date",-1),we={class:"flex items-center justify-between w-[160px] h-10 cursor-pointer border rounded p-2"},$e=["value"],Te=["onClick","innerHTML"],Se=t("label",{class:"primaryColor pb-1 text-sm"},"To Date",-1),ke={class:"flex items-center justify-between w-[160px] h-10 cursor-pointer border rounded p-2"},Le=["value"],Ye=["onClick"],Ce=["innerHTML"],Ve=t("p",{class:"primaryColor pb-1 text-sm"},"Search Mail/SMS",-1),Ae=["placeholder"],qe={class:"flex items-end"},Re=["disabled"],Ee={key:0},je={key:1,class:"animate-spin h-5 w-5 text-white flex mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"#fffff",viewBox:"0 0 24 24"},Be=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"#fffff","stroke-width":"4"},null,-1),Ie=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Fe=[Be,Ie];function He(e,o,h,_,s,p){const l=d("VDatePicker"),n=d("maillogsTable");return r(),i(v,null,[t("div",fe,[t("div",xe,[t("div",null,[ve,D(t("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>s.logType=a),onChange:o[1]||(o[1]=a=>s.value=""),class:"border min-w-[160px] h-10 rounded focus:outline-0 px-4 text-xs"},De,544),[[A,s.logType]])]),t("div",null,[Me,c(l,{type:"date","max-date":new Date().toISOString().slice(0,10),"min-date":p.getMinDate(),modelValue:s.fromDate,"onUpdate:modelValue":o[2]||(o[2]=a=>s.fromDate=a),modelModifiers:{string:!0},"is-required":"",popover:s.popover,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"},mode:"date",dateFormat:"YYYY-MM-DD"},{default:u(({togglePopover:a,inputValue:g,inputEvents:f})=>[t("div",we,[t("input",M({value:g,placeholder:"DD-MM-YYYY"},w(f,!0),{class:"min-w-[100px] text-xs outline-none cursor-pointer",readonly:""}),null,16,$e),t("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700",onClick:()=>a(),innerHTML:s.dateSvg},null,8,Te)])]),_:1},8,["max-date","min-date","modelValue","popover"])]),t("div",null,[Se,c(l,{type:"date","max-date":new Date().toISOString().slice(0,10),modelValue:s.toDate,"onUpdate:modelValue":o[3]||(o[3]=a=>s.toDate=a),modelModifiers:{string:!0},"is-required":"",popover:s.popover,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"},mode:"date",dateFormat:"YYYY-MM-DD"},{default:u(({togglePopover:a,inputValue:g,inputEvents:f})=>[t("div",ke,[t("input",M({value:g,placeholder:"DD-MM-YYYY"},w(f,!0),{class:"min-w-[100px] text-xs outline-none cursor-pointer",readonly:""}),null,16,Le),t("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700",onClick:()=>a()},[t("span",{innerHTML:s.dateSvg},null,8,Ce)],8,Ye)])]),_:1},8,["max-date","modelValue","popover"])]),t("div",null,[Ve,D(t("input",{type:"text",placeholder:s.logType=="SMS"?"Search User Mobile Number":"Search User Email","onUpdate:modelValue":o[4]||(o[4]=a=>s.value=a),class:"border w-full h-10 rounded focus:outline-0 px-4 text-xs"},null,8,Ae),[[q,s.value]])]),t("div",qe,[t("button",{class:"bg-blue-500 text-white h-10 w-[120px] cursor-pointer rounded text-xs",disabled:e.getLoader,onClick:o[5]||(o[5]=a=>p.getReports("table"))},[e.getLoader?x("",!0):(r(),i("p",Ee,"Submit")),e.getLoader?(r(),i("svg",je,Fe)):x("",!0)],8,Re)])])]),t("div",null,[c(n)])],64)}const Ne=b(_e,[["render",He]]),Oe={components:{tabs:L,smsOrMailLogs:Ne},data(){return{currentTab:0}},methods:{changeTab(e){this.$store.commit("setActiveTab",e),this.$store.commit("setQuries",{data:{tab:e},action:"change"}),this.currentTab=e}},mounted(){this.changeTab(0)}};function ze(e,o,h,_,s,p){const l=d("tabs"),n=d("smsOrMailLogs");return r(),i(v,null,[c(l,{class:"mx-4",removeActive:!0,onActiveTab:p.changeTab},null,8,["onActiveTab"]),s.currentTab==0?(r(),y(n,{key:0})):x("",!0)],64)}const Je=b(Oe,[["render",ze]]);export{Je as default};
