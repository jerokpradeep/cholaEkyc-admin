import{P,c as $}from"./Chevron-59891221.js";import{t as j}from"./tabs-605f1a9c.js";import{_ as M,r as i,o as l,e as S,q as u,s as c,a as s,m as C,G as F,c as m,w as U,b as T,v as N,F as x,u as _,A as b,y as L,z as B,t as a,T as R,x as A}from"./index-471713de.js";import{U as O,G as H,V as z,h as G,S as K}from"./transition-9ce3a670.js";import{B as E,K as Q,N as q,H as J,U as W,r as X,a as Z}from"./ChevronUpDownIcon-f0c596c3.js";import"./hidden-b4a717ef.js";import"./use-text-value-b6752d19.js";const ee={name:"assignee-dialog",components:{Dialog:O,DialogPanel:H,DialogTitle:z,TransitionChild:G,TransitionRoot:K},props:{assigneeData:Object},methods:{close(){this.$store.commit("approval/setIsAssign",!1)},callService(){this.$store.dispatch("approval/callAssignee",{id:this.assigneeData.opportunity_id,userId:this.$store.state.login.userData.user,sessId:this.$store.state.login.userData.sid,token:this.$store.state.login.userData.tempToken,assignTo:this.$store.state.login.userData.user})}}},te=s("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),se={class:"fixed inset-0 z-10 overflow-y-auto"},oe={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},re=s("p",{class:"secondaryColor",id:"logout_content"},"Assign this ticket to myself. ",-1),ae={class:"mt-8 flex justify-end gap-2"};function ne(t,o,d,h,r,n){const g=i("TransitionChild"),f=i("DialogTitle"),k=i("DialogPanel"),w=i("Dialog"),D=i("TransitionRoot");return l(),S(D,{as:"template",show:t.$store.state.approval.isAssign},{default:u(()=>[c(w,{as:"div",class:"relative z-10",onClose:o[2]||(o[2]=v=>n.close())},{default:u(()=>[c(g,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:u(()=>[te]),_:1}),s("div",se,[s("div",oe,[c(g,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:u(()=>[c(k,{class:"w-full max-w-md transform rounded overflow-hidden radius p-6 text-left align-middle bg-white"},{default:u(()=>[c(f,{as:"h3",class:"text-base pb-2 font-medium leading-6 primaryColor"},{default:u(()=>[re]),_:1}),s("div",ae,[s("button",{type:"button",class:"themeBtn",id:"logout_btn",onClick:o[0]||(o[0]=v=>n.callService())}," Yes "),s("button",{type:"button",class:"cancelBtn",id:"logout_cancel_btn",onClick:o[1]||(o[1]=v=>n.close())}," No ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}const le=M(ee,[["render",ne]]),ie=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
</svg>
`,ce={components:{Listbox:E,ListboxLabel:Q,ListboxButton:q,ListboxOptions:J,ListboxOption:W,CheckIcon:X,ChevronUpDownIcon:Z,tabs:j,assigneeDialog:le},data(){return{fromDate:"",toDate:"",status:"",application:"",panNo:"",mobileNo:"",applicationSummary:[{type:"In Progress",count:"0"},{type:"Pending for Approval",count:"0"},{type:"Approved",count:"0"},{type:"Completed",count:"0"},{type:"Rejected",count:"0"}],statusType:{},tableHeads:[{name:"S.No",keyName:"",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Customer Name",keyName:"customer_name",class:"text-left",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Application ID",keyName:"opportunity_id",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"PAN No",keyName:"fsl_pan_no",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Mobile No",keyName:"fsl_mobile_num",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Reference ID",keyName:"reference_id",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Referal Name",keyName:"referral_name",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Branch",keyName:"fsl_branch",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Designation",keyName:"designation",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Status",keyName:"status",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Assigned to",keyName:"assigned_person_name",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1},{name:"Date",keyName:"time",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!0},{name:"Hours consumed",keyName:"time",class:"text-center",svg:"sortArrow",sortType:"neutral",isSortable:!1}],Progress:P,chevronSvg:$,currentTab:0,currentAssigneeData:"",imageTest:"https://ekyc.cholasecurities.com/uat/assets/headTree-a3444e58.svg",currentDate:new Date().toISOString().split("T")[0],popover:{visibility:"click",placement:"bottom"},sortArrow:ie}},computed:{...C("approval",["getApprovalList","getIsLoader"]),...F("approval",["isAssign"]),...C("login",["getUserData"]),minDate(){const t=new Date;return t.setDate(t.getDate()-30),t}},methods:{async goToApprovalPage(t){var o,d;if(((o=this.getUserData)==null?void 0:o.Role)!="RM")if(t&&t.fsl_assign_to&&t.opportunity_id)await this.$store.dispatch("approval/getCustomerData",t==null?void 0:t.opportunity_id).finally(()=>{this.$router.push(`/approvepanel?id=${t==null?void 0:t.opportunity_id}&from=${this.$route.fullPath.toString().replace("/","")}`).catch(()=>{}),this.$store.commit("setQuries",{data:{tab:0},action:"change",overRideKey:"approvepanel"})});else if(((d=this.getUserData)==null?void 0:d.Role)!="RM")this.currentAssigneeData=t,this.$store.commit("approval/setIsAssign",!0);else{let h={title:"",type:"danger",message:"The Approval Journey of this has not begun yet. Please wait for the KYC team to start their approval process.",duration:4500};this.$store.dispatch("errorLog/toaster",{data:h,position:""})}},changeTab(t){this.$store.commit("setActiveTab",t),this.$store.commit("setQuries",{data:{tab:t},action:"change"}),this.currentTab=t},getHours(t,o){let h=Math.abs(new Date().valueOf()-new Date(o).valueOf())/(24*60*60*1e3),r=h%1*24,n=r%1*60,g=n%1*60;return[h,r,n,g]=[Math.floor(h),Math.floor(r),Math.floor(n),Math.floor(g)],Number(h)!=0?(t.hours=`${h}d, ${r}h : ${n}m`,t.hours):Number(r)!=0?(t.hours=`${r}h:${n}m`,t.hours):(t.hours=`${n}m`,t.hours)},getFormat(t){return window.formatDate(t,"D&T")},getAllApproval(){let t={from_date:this.fromDate.toISOString().split("T")[0],to_date:this.toDate.toISOString().split("T")[0],status:this.status,application_id:this.application,pan_no:this.panNo,mob_no:this.mobileNo};this.fromDate||this.toDate||this.status||this.application||this.panNo||this.mobileNo?this.$store.dispatch("approval/getFilteredApprovalList",t):this.$store.dispatch("errorLog/toaster",{data:{title:"Please select any field",type:"danger",message:"",duration:4500},position:""},{root:!0})},getStatusType(t){this.status=t.value},async setDefaultFilter(){this.fromDate=this.minDate,this.toDate=new Date,this.status="",this.statusType={name:"ALL",value:""},this.getAllApproval()},sortTable(t){t.sortType=="neutral"||t.sortType=="des"?this.getApprovalList.sort((o,d)=>o[t.keyName]>d[t.keyName]?1:d[t.keyName]>o[t.keyName]?-1:0):t.sortType=="asc"&&this.getApprovalList.sort((o,d)=>o[t.keyName]<d[t.keyName]?1:d[t.keyName]<o[t.keyName]?-1:0),t.sortType=t.sortType=="neutral"||t.sortType=="des"?"asc":t.sortType=="asc"?"des":"neutral"}},created(){this.changeTab(0),this.setDefaultFilter()}},pe={class:"p-4"},ue=["onClick"],me=["value"],de=s("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700"},[s("svg",{fill:"none",stroke:"currentColor",class:"w-4","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})])],-1),he=["onClick"],ge=["value"],ye=s("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700"},[s("svg",{fill:"none",stroke:"currentColor",class:"w-4","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})])],-1),xe={class:"relative"},fe={class:"block truncate text-xs"},ve={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},_e={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-[#0081B8]"},be=["disabled"],Ae={key:0,class:"bg-white py-4 px-8 my-6 rounded-lg flex gap-2 flex-wrap justify-between"},ke={class:"flex flex-col gap-2 justify-center items-center"},we={class:"text-xs"},De={key:1,class:"my-4"},Te={class:"w-full border-t border-[#ededed] dark:border-[#232325] relative mt-[1px] bg-white rounded-lg"},Ne={class:"border-b dark:border-[#232325] dark:bg-[#181818]"},Se=["onClick"],Ce={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Le={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-left"},Be={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Me={class:"flex py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center items-center justify-center"},Ye={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ve={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ie={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Pe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},$e={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},je={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Fe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ue={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Re={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Oe={key:2,class:"flex items-center justify-center min-h-[50vh]"};function He(t,o,d,h,r,n){const g=i("tabs"),f=i("VDatePicker"),k=i("ChevronUpDownIcon"),w=i("ListboxButton"),D=i("CheckIcon"),v=i("ListboxOption"),Y=i("ListboxOptions"),V=i("Listbox"),I=i("assigneeDialog");return l(),m(x,null,[c(g,{class:"mx-4",removeActive:!0,onActiveTab:n.changeTab},null,8,["onActiveTab"]),s("div",pe,[s("form",{onSubmit:o[6]||(o[6]=U(e=>n.getAllApproval(),["prevent"])),class:"flex gap-3 flex-wrap mb-2"},[c(f,{"max-date":r.currentDate,modelValue:r.fromDate,"onUpdate:modelValue":o[0]||(o[0]=e=>r.fromDate=e),mode:"date",popover:!1,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"}},{default:u(({togglePopover:e,inputValue:p,inputEvents:y})=>[s("div",{class:"flex items-center justify-between w-[131px] h-[32px] border rounded p-2",onClick:()=>e()},[s("input",L({value:p,placeholder:"DD/MM/YYYY"},B(y,!0),{id:"vtd_inp",class:"w-[90px] text-xs outline-none cursor-pointer !bg-[#F7F5F5]",readonly:""}),null,16,me),de],8,ue)]),_:1},8,["max-date","modelValue"]),c(f,{"max-date":r.currentDate,"min-date":r.fromDate,modelValue:r.toDate,"onUpdate:modelValue":o[1]||(o[1]=e=>r.toDate=e),mode:"date",popover:!1,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"}},{default:u(({togglePopover:e,inputValue:p,inputEvents:y})=>[s("div",{class:"flex items-center justify-between w-[131px] h-[32px] border rounded p-2",onClick:()=>e()},[s("input",L({value:p,placeholder:"DD/MM/YYYY"},B(y,!0),{id:"vtd_inp",class:"w-[90px] text-xs outline-none cursor-pointer !bg-[#F7F5F5]",readonly:""}),null,16,ge),ye],8,he)]),_:1},8,["max-date","min-date","modelValue"]),s("div",null,[c(V,{modelValue:r.statusType,"onUpdate:modelValue":o[2]||(o[2]=e=>r.statusType=e)},{default:u(()=>[s("div",xe,[c(w,{class:"min-w-[126px] relative w-full cursor-pointer rounded-lg bg-white h-8 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm"},{default:u(()=>[s("span",fe,a(r.statusType.name||"Select status"),1),s("span",ve,[c(k,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),c(R,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:u(()=>[c(Y,{class:"z-[1] absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:u(()=>[(l(!0),m(x,null,_(t.$store.state.statusList,e=>(l(),S(v,{key:e.name,value:e,as:"template",onClick:p=>n.getStatusType(e)},{default:u(({active:p,selected:y})=>[s("li",{class:A([p?"bg-[#F0F6FD] text-[#0081B8]":"text-gray-900","relative cursor-pointer select-none py-2 pl-10 pr-4"])},[s("span",{class:A([y?"font-medium":"font-normal","block truncate text-xs"])},a(e.name),3),y?(l(),m("span",_e,[c(D,{class:"h-5 w-5","aria-hidden":"true"})])):b("",!0)],2)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),T(s("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>r.application=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",placeholder:"Search: Application"},null,512),[[N,r.application]]),T(s("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>r.panNo=e),class:"bg-white rounded-lg border-transparent uppercase px-2 text-xs h-8",maxlength:"10",placeholder:"Search: PAN No."},null,512),[[N,r.panNo]]),T(s("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=e=>r.mobileNo=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",maxlength:"10",placeholder:"Search: Mobile No."},null,512),[[N,r.mobileNo]]),s("button",{type:"submit",disabled:t.getIsLoader,class:"flex justify-center items-center min-w-[100px] h-[32px] py-2 px-4 rounded-lg text-xs text-white font-bold bg-[#753ED7]"},"Submit",8,be)],32),r.currentTab==0?(l(),m("div",Ae,[(l(!0),m(x,null,_(r.applicationSummary,(e,p)=>(l(),m("div",{key:p},[s("div",ke,[s("div",we,a(e.type),1),s("div",{class:A(["text-lg font-bold",{"text-purple-700":e.type=="In Progress","text-gray-800":e.type=="Pending for Approval","text-blue-600":e.type=="Approved","text-green-600":e.type=="Completed","text-red-600":e.type=="Rejected"}])},a(e.count),3)])]))),128))])):b("",!0),r.currentTab==0&&!t.getIsLoader&&t.getApprovalList.length>0?(l(),m("div",De,[s("table",Te,[s("thead",Ne,[s("tr",null,[(l(!0),m(x,null,_(r.tableHeads,(e,p)=>(l(),m("th",{key:p,scope:"col",class:A([e.class,"py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"])},a(e.name)+" ",3))),128))])]),s("tbody",null,[(l(!0),m(x,null,_(t.getApprovalList,(e,p)=>(l(),m("tr",{key:p,class:"border-b cursor-pointer hover:bg-gray-50",onClick:y=>n.goToApprovalPage(e)},[s("td",Ce,a(p+1),1),s("td",Le,a(e.customer_name?e.customer_name:"NA"),1),s("td",Be,a(e.opportunity_id?e.opportunity_id:"NA"),1),s("td",Me,a(e.fsl_pan_no?e.fsl_pan_no:"NA"),1),s("td",Ye,a(e.fsl_mobile_num?e.fsl_mobile_num:"NA"),1),s("td",Ve,a(e.reference_id?e.reference_id:"NA"),1),s("td",Ie,a(e.referral_name?e.referral_name:"NA"),1),s("td",Pe,a(e.fsl_branch?e.fsl_branch:"NA"),1),s("td",$e,a(e.designation?e.designation:"NA"),1),s("td",je,a(e.status?e.status:"NA"),1),s("td",Fe,a(e.assigned_person_name?e.assigned_person_name:""),1),s("td",Ue,a(e.time&&e.time!=" "?n.getFormat(e.time):"NA"),1),s("td",Re,a(e.time&&e.time!=" "?n.getHours(e,e.time):"NA"),1)],8,Se))),128))])])])):t.getIsLoader?b("",!0):(l(),m("div",Oe,"No Records Found")),t.isAssign?(l(),S(I,{key:3,assigneeData:r.currentAssigneeData},null,8,["assigneeData"])):b("",!0)])],64)}const We=M(ce,[["render",He]]);export{We as default};
