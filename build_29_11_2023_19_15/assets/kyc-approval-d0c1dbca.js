import{P as I,c as B}from"./Chevron-047c33ef.js";import{t as V}from"./tabs-a280b2cc.js";import{_ as S,r as i,o as r,e as C,q as d,s as c,a as t,m as P,D as H,c as p,b as g,v as x,F as y,u as b,y as v,t as n,T as U,x as A}from"./index-15629e2b.js";import{U as O,G as j,V as M,h as R,S as J}from"./transition-607ce67a.js";import{r as q,a as F}from"./ChevronUpDownIcon-816da490.js";import{B as z,K,N as G,H as E,U as Q}from"./listbox-08a32d86.js";import"./use-text-value-f68aee52.js";const Y={name:"assignee-dialog",components:{Dialog:O,DialogPanel:j,DialogTitle:M,TransitionChild:R,TransitionRoot:J},props:{assigneeData:Object},methods:{close(){this.$store.commit("approval/setIsAssign",!1)},callService(){this.$store.dispatch("approval/callAssignee",{id:this.assigneeData.opportunity_id,userId:this.$store.state.login.userData.user,sessId:this.$store.state.login.userData.sid,token:this.$store.state.login.userData.tempToken,assignTo:this.$store.state.login.userData.user})}}},W=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),X={class:"fixed inset-0 z-10 overflow-y-auto"},Z={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ee=t("p",{class:"secondaryColor",id:"logout_content"},"Assign this ticket to myself. ",-1),te={class:"mt-8 flex justify-end gap-2"};function se(s,a,l,u,o,m){const f=i("TransitionChild"),k=i("DialogTitle"),D=i("DialogPanel"),N=i("Dialog"),T=i("TransitionRoot");return r(),C(T,{as:"template",show:s.$store.state.approval.isAssign},{default:d(()=>[c(N,{as:"div",class:"relative z-10",onClose:a[2]||(a[2]=_=>m.close())},{default:d(()=>[c(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[W]),_:1}),t("div",X,[t("div",Z,[c(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[c(D,{class:"w-full max-w-md transform rounded overflow-hidden radius p-6 text-left align-middle bg-white"},{default:d(()=>[c(k,{as:"h3",class:"text-base pb-2 font-medium leading-6 primaryColor"},{default:d(()=>[ee]),_:1}),t("div",te,[t("button",{type:"button",class:"themeBtn",id:"logout_btn",onClick:a[0]||(a[0]=_=>m.callService())}," Yes "),t("button",{type:"button",class:"cancelBtn",id:"logout_cancel_btn",onClick:a[1]||(a[1]=_=>m.close())}," No ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}const oe=S(Y,[["render",se]]),ae={components:{Listbox:z,ListboxLabel:K,ListboxButton:G,ListboxOptions:E,ListboxOption:Q,CheckIcon:q,ChevronUpDownIcon:F,tabs:V,assigneeDialog:oe},data(){return{fromDate:"",toDate:"",status:"",application:"",panNo:"",mobileNo:"",applicationSummary:[{type:"In Progress",count:"0"},{type:"Pending for Approval",count:"0"},{type:"Approved",count:"0"},{type:"Completed",count:"0"},{type:"Rejected",count:"0"}],statusList:[{name:"In Progress"},{name:"Pending"},{name:"Approved"},{name:"Completed"},{name:"Rejected"}],statusType:{},tableHeads:[{name:"S.No",class:"text-center"},{name:"Customer Name",class:"text-left"},{name:"Application ID",class:"text-center"},{name:"PAN No",class:"text-center"},{name:"Status",class:"text-center"},{name:"Mobile No",class:"text-center"},{name:"Assigned to",class:"text-center"},{name:"Hours consumed",class:"text-center"}],tableData:[{SNO:"1",applicationId:"2",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Mobile Verification",Progress:"",Phases:"3",Hoursconsumed:"8.24 Hr ",Inferredprogress:"On Track",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"2",applicationId:"3",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Email Verification",Progress:"",Phases:"3",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"3",applicationId:"4",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"PAN Verification",Progress:"",Phases:"5",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"4",applicationId:"5",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Address",Progress:"",Phases:"8",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"}],Progress:I,chevronSvg:B,currentTab:0,currentAssigneeData:"",imageTest:"https://ekyc.cholasecurities.com/uat/assets/headTree-a3444e58.svg"}},computed:{...P("approval",["getApprovalList","getIsLoader"]),...H("approval",["isAssign"]),...P("login",["getUserData"])},methods:{async goToApprovalPage(s){var a;if(s&&s.fsl_assign_to&&s.opportunity_id)await this.$store.dispatch("approval/getCustomerData",s==null?void 0:s.opportunity_id).finally(()=>{this.$router.push(`/approvepanel?id=${s==null?void 0:s.opportunity_id}&from=${this.$route.fullPath.toString().replace("/","")}`).catch(()=>{}),this.$store.commit("setQuries",{data:{tab:0},action:"change",overRideKey:"approvepanel"})});else if(((a=this.getUserData)==null?void 0:a.Role)!="RM")this.currentAssigneeData=s,this.$store.commit("approval/setIsAssign",!0);else{let l={title:"",type:"danger",message:"The Approval Journey of this has not begun yet. Please wait for the KYC team to start their approval process.",duration:4500};this.$store.dispatch("errorLog/toaster",{data:l,position:""})}},changeTab(s){this.$store.commit("setActiveTab",s),this.$store.commit("setQuries",{data:{tab:s},action:"change"}),s==1&&this.$store.dispatch("approval/getApprovalList"),this.currentTab=s},getHours(s){let l=Math.abs(new Date().valueOf()-new Date(s).valueOf())/(24*60*60*1e3),u=l%1*24,o=u%1*60,m=o%1*60;return[l,u,o,m]=[Math.floor(l),Math.floor(u),Math.floor(o),Math.floor(m)],Number(l)!=0?`${l}d, ${u}h : ${o}m`:Number(u)!=0?`${u}h:${o}m`:`${o}m`}},created(){var s,a,l,u;this.$store.commit("setActiveTab",(s=this.$store.state.queries)!=null&&s.kycapproval?(a=this.$store.state.queries)==null?void 0:a.kycapproval.query.tab:0),this.changeTab((l=this.$store.state.queries)!=null&&l.kycapproval?(u=this.$store.state.queries)==null?void 0:u.kycapproval.query.tab:0)}},re={class:"p-4"},ne={class:"flex gap-3 flex-wrap"},ie={class:"relative"},le={class:"block truncate text-xs"},pe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ce={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-[#0081B8]"},ue={key:0,class:"bg-white py-4 px-8 my-6 rounded-lg flex gap-2 flex-wrap justify-between"},de={class:"flex flex-col gap-2 justify-center items-center"},me={class:"text-xs"},he={key:1,class:"my-4"},ge={class:"w-full border-t border-[#ededed] dark:border-[#232325] relative mt-[1px] bg-white rounded-lg"},xe={class:"border-b dark:border-[#232325] dark:bg-[#181818]"},ye=["onClick"],fe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},_e={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-left"},be={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},ve={class:"flex py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center items-center justify-center"},Ae={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},ke={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},De={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ne={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Te={key:2,class:"flex items-center justify-center min-h-[50vh]"};function we(s,a,l,u,o,m){const f=i("tabs"),k=i("ChevronUpDownIcon"),D=i("ListboxButton"),N=i("CheckIcon"),T=i("ListboxOption"),_=i("ListboxOptions"),L=i("Listbox"),$=i("assigneeDialog");return r(),p(y,null,[c(f,{class:"mx-4",onActiveTab:m.changeTab},null,8,["onActiveTab"]),t("div",re,[t("div",ne,[g(t("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>o.fromDate=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8"},null,512),[[x,o.fromDate]]),g(t("input",{type:"date","onUpdate:modelValue":a[1]||(a[1]=e=>o.toDate=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8"},null,512),[[x,o.toDate]]),t("div",null,[c(L,{modelValue:o.statusType,"onUpdate:modelValue":a[2]||(a[2]=e=>o.statusType=e)},{default:d(()=>[t("div",ie,[c(D,{class:"min-w-[126px] relative w-full cursor-pointer rounded-lg bg-white h-8 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm"},{default:d(()=>[t("span",le,n(o.statusType.name||"Select status"),1),t("span",pe,[c(k,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),c(U,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:d(()=>[c(_,{class:"z-[1] absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:d(()=>[(r(!0),p(y,null,b(o.statusList,e=>(r(),C(T,{key:e.name,value:e,as:"template"},{default:d(({active:h,selected:w})=>[t("li",{class:A([h?"bg-[#F0F6FD] text-[#0081B8]":"text-gray-900","relative cursor-pointer select-none py-2 pl-10 pr-4"])},[t("span",{class:A([w?"font-medium":"font-normal","block truncate text-xs"])},n(e.name),3),w?(r(),p("span",ce,[c(N,{class:"h-5 w-5","aria-hidden":"true"})])):v("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),g(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>o.application=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",placeholder:"Search: Application"},null,512),[[x,o.application]]),g(t("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>o.panNo=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",placeholder:"Search: PAN No."},null,512),[[x,o.panNo]]),g(t("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>o.mobileNo=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",placeholder:"Search: Mobile No."},null,512),[[x,o.mobileNo]])]),o.currentTab==0?(r(),p("div",ue,[(r(!0),p(y,null,b(o.applicationSummary,(e,h)=>(r(),p("div",{key:h},[t("div",de,[t("div",me,n(e.type),1),t("div",{class:A(["text-lg font-bold",{"text-purple-700":e.type=="In Progress","text-gray-800":e.type=="Pending for Approval","text-blue-600":e.type=="Approved","text-green-600":e.type=="Completed","text-red-600":e.type=="Rejected"}])},n(e.count),3)])]))),128))])):v("",!0),o.currentTab==1&&!s.getIsLoader&&s.getApprovalList.length>0?(r(),p("div",he,[t("table",ge,[t("thead",xe,[t("tr",null,[(r(!0),p(y,null,b(o.tableHeads,(e,h)=>(r(),p("th",{key:h,scope:"col",class:A([e.class,"py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"])},n(e.name),3))),128))])]),t("tbody",null,[(r(!0),p(y,null,b(s.getApprovalList,(e,h)=>(r(),p("tr",{key:h,class:"border-b cursor-pointer hover:bg-gray-50",onClick:w=>m.goToApprovalPage(e)},[t("td",fe,n(h+1),1),t("td",_e,n(e.customer_name?e.customer_name:"NA"),1),t("td",be,n(e.opportunity_id?e.opportunity_id:"NA"),1),t("td",ve,n(e.fsl_pan_no?e.fsl_pan_no:"NA"),1),t("td",Ae,n(e["current phase"]?e["current phase"]:"NA"),1),t("td",ke,n(e.fsl_mobile_num?e.fsl_mobile_num:"NA"),1),t("td",De,n(e.assigned_person_name?e.assigned_person_name:""),1),t("td",Ne,n(e.time&&e.time!=" "?m.getHours(e.time):"NA"),1)],8,ye))),128))])])])):s.getIsLoader?v("",!0):(r(),p("div",Te,"No Records Found")),s.isAssign?(r(),C($,{key:3,assigneeData:o.currentAssigneeData},null,8,["assigneeData"])):v("",!0)])],64)}const Ve=S(ae,[["render",we]]);export{Ve as default};
