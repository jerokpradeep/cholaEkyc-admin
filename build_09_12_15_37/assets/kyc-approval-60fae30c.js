import{P as Y,c as $}from"./Chevron-047c33ef.js";import{t as j}from"./tabs-4a429dc0.js";import{_ as I,r as i,o as r,e as C,q as d,s as l,a as t,m as S,G as O,c as m,w as H,b as N,v as T,F as x,u as y,A as b,y as P,z as L,t as n,T as U,x as A}from"./index-30de5f2e.js";import{U as R,G as F,V as J,h as q,S as z}from"./transition-f213c0f8.js";import{B as G,K,N as E,H as Q,U as W,r as X,a as Z}from"./ChevronUpDownIcon-9bff3c1f.js";import"./use-text-value-64387f35.js";const ee={name:"assignee-dialog",components:{Dialog:R,DialogPanel:F,DialogTitle:J,TransitionChild:q,TransitionRoot:z},props:{assigneeData:Object},methods:{close(){this.$store.commit("approval/setIsAssign",!1)},callService(){this.$store.dispatch("approval/callAssignee",{id:this.assigneeData.opportunity_id,userId:this.$store.state.login.userData.user,sessId:this.$store.state.login.userData.sid,token:this.$store.state.login.userData.tempToken,assignTo:this.$store.state.login.userData.user})}}},te=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),se={class:"fixed inset-0 z-10 overflow-y-auto"},oe={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ae=t("p",{class:"secondaryColor",id:"logout_content"},"Assign this ticket to myself. ",-1),ne={class:"mt-8 flex justify-end gap-2"};function re(s,a,u,h,o,c){const v=i("TransitionChild"),f=i("DialogTitle"),D=i("DialogPanel"),k=i("Dialog"),w=i("TransitionRoot");return r(),C(w,{as:"template",show:s.$store.state.approval.isAssign},{default:d(()=>[l(k,{as:"div",class:"relative z-10",onClose:a[2]||(a[2]=_=>c.close())},{default:d(()=>[l(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[te]),_:1}),t("div",se,[t("div",oe,[l(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[l(D,{class:"w-full max-w-md transform rounded overflow-hidden radius p-6 text-left align-middle bg-white"},{default:d(()=>[l(f,{as:"h3",class:"text-base pb-2 font-medium leading-6 primaryColor"},{default:d(()=>[ae]),_:1}),t("div",ne,[t("button",{type:"button",class:"themeBtn",id:"logout_btn",onClick:a[0]||(a[0]=_=>c.callService())}," Yes "),t("button",{type:"button",class:"cancelBtn",id:"logout_cancel_btn",onClick:a[1]||(a[1]=_=>c.close())}," No ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}const ie=I(ee,[["render",re]]),le={components:{Listbox:G,ListboxLabel:K,ListboxButton:E,ListboxOptions:Q,ListboxOption:W,CheckIcon:X,ChevronUpDownIcon:Z,tabs:j,assigneeDialog:ie},data(){return{fromDate:"",toDate:"",status:"",application:"",panNo:"",mobileNo:"",applicationSummary:[{type:"In Progress",count:"0"},{type:"Pending for Approval",count:"0"},{type:"Approved",count:"0"},{type:"Completed",count:"0"},{type:"Rejected",count:"0"}],statusList:[{name:"ALL",value:""},{name:"In-Progress",value:"In-Progress"},{name:"Pending",value:"Pending"},{name:"Approved",value:"Approved"},{name:"Completed",value:"Completed"},{name:"Rejected",value:"Rejected"}],statusType:{},tableHeads:[{name:"S.No",class:"text-center"},{name:"Customer Name",class:"text-left"},{name:"Application ID",class:"text-center"},{name:"PAN No",class:"text-center"},{name:"Mobile No",class:"text-center"},{name:"Reference ID",class:"text-center"},{name:"Referal Name",class:"text-center"},{name:"Branch",class:"text-center"},{name:"Designation",class:"text-center"},{name:"Status",class:"text-center"},{name:"Assigned to",class:"text-center"},{name:"Hours consumed",class:"text-center"}],tableData:[{SNO:"1",applicationId:"2",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Mobile Verification",Progress:"",Phases:"3",Hoursconsumed:"8.24 Hr ",Inferredprogress:"On Track",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"2",applicationId:"3",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Email Verification",Progress:"",Phases:"3",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"3",applicationId:"4",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"PAN Verification",Progress:"",Phases:"5",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"},{SNO:"4",applicationId:"5",CustomerName:"Akash",panNo:"JSJPS0302D",Currentphases:"Address",Progress:"",Phases:"8",Hoursconsumed:"8.24 Hr",assignedTo:"Akash",mobileNo:"8783423442"}],Progress:Y,chevronSvg:$,currentTab:0,currentAssigneeData:"",imageTest:"https://ekyc.cholasecurities.com/uat/assets/headTree-a3444e58.svg",currentDate:new Date().toISOString().split("T")[0],popover:{visibility:"click",placement:"bottom"}}},computed:{...S("approval",["getApprovalList","getIsLoader"]),...O("approval",["isAssign"]),...S("login",["getUserData"]),minDate(){const s=new Date;return s.setDate(s.getDate()-30),s},minDateString(){return this.minDate.toISOString().split("T")[0]}},methods:{async goToApprovalPage(s){var a;if(s&&s.fsl_assign_to&&s.opportunity_id)await this.$store.dispatch("approval/getCustomerData",s==null?void 0:s.opportunity_id).finally(()=>{this.$router.push(`/approvepanel?id=${s==null?void 0:s.opportunity_id}&from=${this.$route.fullPath.toString().replace("/","")}`).catch(()=>{}),this.$store.commit("setQuries",{data:{tab:0},action:"change",overRideKey:"approvepanel"})});else if(((a=this.getUserData)==null?void 0:a.Role)!="RM")this.currentAssigneeData=s,this.$store.commit("approval/setIsAssign",!0);else{let u={title:"",type:"danger",message:"The Approval Journey of this has not begun yet. Please wait for the KYC team to start their approval process.",duration:4500};this.$store.dispatch("errorLog/toaster",{data:u,position:""})}},changeTab(s){this.$store.commit("setActiveTab",s),this.$store.commit("setQuries",{data:{tab:s},action:"change"}),this.currentTab=s},getHours(s){let u=Math.abs(new Date().valueOf()-new Date(s).valueOf())/(24*60*60*1e3),h=u%1*24,o=h%1*60,c=o%1*60;return[u,h,o,c]=[Math.floor(u),Math.floor(h),Math.floor(o),Math.floor(c)],Number(u)!=0?`${u}d, ${h}h : ${o}m`:Number(h)!=0?`${h}h:${o}m`:`${o}m`},getAllApproval(){let s={from_date:this.fromDate.toISOString().split("T")[0],to_date:this.toDate.toISOString().split("T")[0],status:this.status,application_id:this.application,pan_no:this.panNo,mob_no:this.mobileNo};this.fromDate||this.toDate||this.status||this.application||this.panNo||this.mobileNo?this.$store.dispatch("approval/getFilteredApprovalList",s):this.$store.dispatch("errorLog/toaster",{data:{title:"Please select any field",type:"danger",message:"",duration:4500},position:""},{root:!0})},getStatusType(s){this.status=s.value},async setDefaultFilter(){this.fromDate=new Date,this.toDate=new Date,this.status="",this.statusType={name:"ALL",value:""},this.getAllApproval()}},created(){var s,a,u,h;this.$store.commit("setActiveTab",(s=this.$store.state.queries)!=null&&s.kycapproval?(a=this.$store.state.queries)==null?void 0:a.kycapproval.query.tab:0),this.changeTab((u=this.$store.state.queries)!=null&&u.kycapproval?(h=this.$store.state.queries)==null?void 0:h.kycapproval.query.tab:0),this.setDefaultFilter()}},ce={class:"p-4"},pe=["onClick"],de=["value"],ue=t("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700"},[t("svg",{fill:"none",stroke:"currentColor",class:"w-4","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})])],-1),me=["onClick"],he=["value"],ge=t("button",{type:"button",class:"flex justify-center items-center bg-accent-100 hover:bg-accent-200 text-accent-700"},[t("svg",{fill:"none",stroke:"currentColor",class:"w-4","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})])],-1),xe={class:"relative"},ve={class:"block truncate text-xs"},fe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},_e={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-[#0081B8]"},ye=["disabled"],be={key:0,class:"bg-white py-4 px-8 my-6 rounded-lg flex gap-2 flex-wrap justify-between"},Ae={class:"flex flex-col gap-2 justify-center items-center"},De={class:"text-xs"},ke={key:1,class:"my-4"},we={class:"w-full border-t border-[#ededed] dark:border-[#232325] relative mt-[1px] bg-white rounded-lg"},Ne={class:"border-b dark:border-[#232325] dark:bg-[#181818]"},Te=["onClick"],Ce={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Se={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-left"},Pe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Le={class:"flex py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center items-center justify-center"},Ie={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Me={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Be={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ve={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Ye={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},$e={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},je={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},Oe={class:"py-4 px-3 text-sm primary-color dark:text-[#94A3B8] relative text-center"},He={key:2,class:"flex items-center justify-center min-h-[50vh]"};function Ue(s,a,u,h,o,c){const v=i("tabs"),f=i("VDatePicker"),D=i("ChevronUpDownIcon"),k=i("ListboxButton"),w=i("CheckIcon"),_=i("ListboxOption"),M=i("ListboxOptions"),B=i("Listbox"),V=i("assigneeDialog");return r(),m(x,null,[l(v,{class:"mx-4",removeActive:!0,onActiveTab:c.changeTab},null,8,["onActiveTab"]),t("div",ce,[t("form",{onSubmit:a[6]||(a[6]=H(e=>c.getAllApproval(),["prevent"])),class:"flex gap-3 flex-wrap mb-2"},[l(f,{"max-date":o.currentDate,"min-date":c.minDateString,modelValue:o.fromDate,"onUpdate:modelValue":a[0]||(a[0]=e=>o.fromDate=e),mode:"date",popover:!1,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"}},{default:d(({togglePopover:e,inputValue:p,inputEvents:g})=>[t("div",{class:"flex items-center justify-between w-[131px] h-[32px] border rounded p-2",onClick:()=>e()},[t("input",P({value:p,placeholder:"DD/MM/YYYY"},L(g,!0),{id:"vtd_inp",class:"w-[90px] text-xs outline-none cursor-pointer",readonly:""}),null,16,de),ue],8,pe)]),_:1},8,["max-date","min-date","modelValue"]),l(f,{"max-date":o.currentDate,"min-date":o.fromDate,modelValue:o.toDate,"onUpdate:modelValue":a[1]||(a[1]=e=>o.toDate=e),mode:"date",popover:!1,masks:{input:"DD-MM-YYYY",modelValue:"YYYY-MM-DD"}},{default:d(({togglePopover:e,inputValue:p,inputEvents:g})=>[t("div",{class:"flex items-center justify-between w-[131px] h-[32px] border rounded p-2",onClick:()=>e()},[t("input",P({value:p,placeholder:"DD/MM/YYYY"},L(g,!0),{id:"vtd_inp",class:"w-[90px] text-xs outline-none cursor-pointer",readonly:""}),null,16,he),ge],8,me)]),_:1},8,["max-date","min-date","modelValue"]),t("div",null,[l(B,{modelValue:o.statusType,"onUpdate:modelValue":a[2]||(a[2]=e=>o.statusType=e)},{default:d(()=>[t("div",xe,[l(k,{class:"min-w-[126px] relative w-full cursor-pointer rounded-lg bg-white h-8 py-2 pl-3 pr-10 text-left focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm"},{default:d(()=>[t("span",ve,n(o.statusType.name||"Select status"),1),t("span",fe,[l(D,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),l(U,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:d(()=>[l(M,{class:"z-[1] absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:d(()=>[(r(!0),m(x,null,y(o.statusList,e=>(r(),C(_,{key:e.name,value:e,as:"template",onClick:p=>c.getStatusType(e)},{default:d(({active:p,selected:g})=>[t("li",{class:A([p?"bg-[#F0F6FD] text-[#0081B8]":"text-gray-900","relative cursor-pointer select-none py-2 pl-10 pr-4"])},[t("span",{class:A([g?"font-medium":"font-normal","block truncate text-xs"])},n(e.name),3),g?(r(),m("span",_e,[l(w,{class:"h-5 w-5","aria-hidden":"true"})])):b("",!0)],2)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),N(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>o.application=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",placeholder:"Search: Application"},null,512),[[T,o.application]]),N(t("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>o.panNo=e),class:"bg-white rounded-lg border-transparent uppercase px-2 text-xs h-8",maxlength:"10",placeholder:"Search: PAN No."},null,512),[[T,o.panNo]]),N(t("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>o.mobileNo=e),class:"bg-white rounded-lg border-transparent px-2 text-xs h-8",maxlength:"10",placeholder:"Search: Mobile No."},null,512),[[T,o.mobileNo]]),t("button",{type:"submit",disabled:s.getIsLoader,class:"flex justify-center items-center min-w-[100px] h-[32px] py-2 px-4 rounded-lg text-xs text-white font-bold bg-[#753ED7]"},"Submit",8,ye)],32),o.currentTab==0?(r(),m("div",be,[(r(!0),m(x,null,y(o.applicationSummary,(e,p)=>(r(),m("div",{key:p},[t("div",Ae,[t("div",De,n(e.type),1),t("div",{class:A(["text-lg font-bold",{"text-purple-700":e.type=="In Progress","text-gray-800":e.type=="Pending for Approval","text-blue-600":e.type=="Approved","text-green-600":e.type=="Completed","text-red-600":e.type=="Rejected"}])},n(e.count),3)])]))),128))])):b("",!0),o.currentTab==1&&!s.getIsLoader&&s.getApprovalList.length>0?(r(),m("div",ke,[t("table",we,[t("thead",Ne,[t("tr",null,[(r(!0),m(x,null,y(o.tableHeads,(e,p)=>(r(),m("th",{key:p,scope:"col",class:A([e.class,"py-3.5 px-3 text-[13px] font-medium primaryColor whitespace-nowrap"])},n(e.name),3))),128))])]),t("tbody",null,[(r(!0),m(x,null,y(s.getApprovalList,(e,p)=>(r(),m("tr",{key:p,class:"border-b cursor-pointer hover:bg-gray-50",onClick:g=>c.goToApprovalPage(e)},[t("td",Ce,n(p+1),1),t("td",Se,n(e.customer_name?e.customer_name:"NA"),1),t("td",Pe,n(e.opportunity_id?e.opportunity_id:"NA"),1),t("td",Le,n(e.fsl_pan_no?e.fsl_pan_no:"NA"),1),t("td",Ie,n(e.fsl_mobile_num?e.fsl_mobile_num:"NA"),1),t("td",Me,n(e.reference_id?e.reference_id:"NA"),1),t("td",Be,n(e.referral_name?e.referral_name:"NA"),1),t("td",Ve,n(e.fsl_branch?e.fsl_branch:"NA"),1),t("td",Ye,n(e.designation?e.designation:"NA"),1),t("td",$e,n(e.status?e.status:"NA"),1),t("td",je,n(e.assigned_person_name?e.assigned_person_name:""),1),t("td",Oe,n(e.time&&e.time!=" "?c.getHours(e.time):"NA"),1)],8,Te))),128))])])])):s.getIsLoader?b("",!0):(r(),m("div",He,"No Records Found")),s.isAssign?(r(),C(V,{key:3,assigneeData:o.currentAssigneeData},null,8,["assigneeData"])):b("",!0)])],64)}const Ke=I(le,[["render",Ue]]);export{Ke as default};
